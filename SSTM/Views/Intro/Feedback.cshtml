@{
	Layout = null;
}
<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link href="https://fonts.googleapis.com/css?family=Roboto:400,700,900&display=swap" rel="stylesheet">
	<link href="@Url.Content("~/Content/intro-page/bootstrap.min.css")" rel="stylesheet" />
	<link href="@Url.Content("~/Theme/plugins/fontawesome-free/css/all.min.css")" rel="stylesheet" />
	<link href="@Url.Content("~/Theme/plugins/toastr/toastr.min.css")" rel="stylesheet" />
	<title>feedback</title>
	<style>
        body {
            font-family: 'Roboto Slab', serif!important;
            background-image: url( @Url.Content("~/Content/intro-page/working_from_anywhere.svg") ),url( @Url.Content("~/Content/intro-page/biblio_re_xarc.svg") );
            background-position: left bottom,right top;
            background-repeat: no-repeat;
            background-size: 600px 400px;
        }
        .bg-info, btn-info {
            background-color: rgb(108, 99, 255) !important;
            background: rgb(108, 99, 255) !important;
            color:white!important
        }
        .rating-area {
            width: 100px;
            padding: 10px 0 10px 0;
            background: #e8e8e8;
            border-radius: 5px;
            display: flex;
            flex-direction: column;
        }
        .align-center {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .transition-fast {
            transition: 0.2s ease-out;
        }
        .thumbs-up-circle {
            width: 50px;
            height: 50px;
            background: #f0f0f0;
            border-radius: 50%;
            box-shadow: 1px 1px 0px rgba(0,0,0,0.2);
            cursor: pointer;
            margin-bottom: 5px;
            margin-top: 5px;
        }

        .thumbs-up {
            color: #2196f3;
            font-size: 24px;
            transform: rotate(0) translate(0);
        }

        .thumbs-up-circle:hover {
            box-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

            .thumbs-up-circle:hover .thumbs-up {
                color: #1976D2;
                transform: rotate(-5deg) translate(0px, -1px);
            }

        .thumbs-up-circle:active {
            background: #e0e0e0;
            box-shadow: 1px 1px 0px rgba(0,0,0,0.2);
        }

            .thumbs-up-circle:active .thumbs-up {
                color: #065bae;
                transition: 0.1s;
                transform: rotate(-10deg) translate(0px, -2px);
            }

        .thumbs-down {
            color: #9E9E9E;
            font-size: 24px;
            transform: rotate(0) translate(0);
        }

        .thumbs-up-circle:hover .thumbs-down {
            color: #565656;
            transform: rotate(5deg) translate(0px, 1px);
        }

        .thumbs-up-circle:active .thumbs-down {
            color: #424242;
            transition: 0.1s;
            transform: rotate(10deg) translate(0px, 2px);
        }

        .success-box {
            margin: 20px 0;
            padding: 7px 7px;
            border: 1px solid #eee;
            background: #f9f9f9;
        }

            .success-box img {
                margin-right: 10px;
                display: inline-block;
                vertical-align: top;
            }

            .success-box > div {
                vertical-align: top;
                display: inline-block;
                color: #888;
            }
	</style>
</head>
@Html.AntiForgeryToken()

<body style="">
	<div class="container">
		<div class="row justify-content-center">
			<div class="col-12 col-md-6 pb-5">
				<div class="card rounded-0 mt-5 shadow-lg">
					<div class="card-header p-0">
						<div class="bg-info text-white text-center py-2">
							<img src="@Url.Content("~/Theme/images/eversafe-logo-.png")" />
							<p class="m-0">Feedback</p>
						</div>
					</div>
					<div class="card-body p-3">
						<div class="form-group">
							<div class="input-group mb-2">
								<div class="input-group-prepend">
									<div class="input-group-text"><i class="fa fa-user text-info" style="color: rgb(108, 99, 255) !important"></i></div>
								</div>
								<input value="@TempData["studentName"]" type="text" class="form-control shadow-none" id="txtStudentName" name="nombre" placeholder="Student Name *" required>
							</div>
						</div>
						<div class="form-group">
							<div class="input-group mb-2">
								<div class="input-group-prepend">
									<div class="input-group-text"><i class="fa fa-tasks text-info" style="color: rgb(108, 99, 255) !important"></i></div>
								</div>
								<input value="@TempData["batchId"]" type="text" class="form-control shadow-none" id="txtBatchId" name="nombre" placeholder="Batch Id *" required>
							</div>
						</div>
						<div class="form-group">
							<div class="input-group mb-2">
								<div class="input-group-prepend">
									<div class="input-group-text"><i class="fa fa-industry text-info" style="color: rgb(108, 99, 255) !important"></i></div>
								</div>
								<input value="@TempData["courseId"]" type="text" class="form-control shadow-none" id="txtCourseId" name="nombre" placeholder="Course Id *" required>
							</div>
						</div>
						<p class="text-black col-form-label-sm font-weight-bold" align="center">
							How is the over all performance of the trainer ?
							( knowledge sharing, patience , clear explanation, given examples )
						</p>
						<div class="form-group">
							<div class="card">
								<div class="card-header">Rating</div>
								<div class="card-body">
									<div class="form-row">
										<div class="col-md-12 d-inline-flex">
											<div class="col-md-5">
												<div class="thumbs-up-circle align-center transition-fast thumbs">
													<span class="thumbs-down transition-fast spnrating"><i class="icon fa fa-thumbs-down thumb red" data-value="1" style="color: #F80F44"></i></span>
												</div>
												<span class="font-weight-bold">&nbsp;Poor</span>
											</div>
											<div class="col-md-5">
												<div class="thumbs-up-circle align-center transition-fast thumbs">
													<span class="thumbs-up transition-fast spnrating"><i class="icon fa fa-thumbs-up thumb yellow" data-value="2" style="color: #fb3 "></i></span>
												</div>
												<span class="font-weight-bold">&nbsp;Excellent</span>
											</div>
											<div class="col-md-5">
												<div class="thumbs-up-circle align-center transition-fast thumbs">
													<span class="thumbs-down transition-fast spnrating"><i class="icon fa fa-smile-beam thumb green" data-value="3" style="color: #09D380 !important "></i></span>
												</div>
												<span class="font-weight-bold">Excellent</span>
											</div>
										</div>
									</div>
									<div class="form-row" id="rating_description" hidden>
										<div class='success-box'>
											<img alt='tick image' width='20' src='data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCA0MjYuNjY3IDQyNi42NjciIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQyNi42NjcgNDI2LjY2NzsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+CjxwYXRoIHN0eWxlPSJmaWxsOiM2QUMyNTk7IiBkPSJNMjEzLjMzMywwQzk1LjUxOCwwLDAsOTUuNTE0LDAsMjEzLjMzM3M5NS41MTgsMjEzLjMzMywyMTMuMzMzLDIxMy4zMzMgIGMxMTcuODI4LDAsMjEzLjMzMy05NS41MTQsMjEzLjMzMy0yMTMuMzMzUzMzMS4xNTcsMCwyMTMuMzMzLDB6IE0xNzQuMTk5LDMyMi45MThsLTkzLjkzNS05My45MzFsMzEuMzA5LTMxLjMwOWw2Mi42MjYsNjIuNjIyICBsMTQwLjg5NC0xNDAuODk4bDMxLjMwOSwzMS4zMDlMMTc0LjE5OSwzMjIuOTE4eiIvPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K' />
											<span class='text-message'></span>
										</div>
										<textarea id="txtxSuggestion" class='text-feeback-message form-control' placeholder="Enter your suggestion."></textarea>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="text-center mb-3">
						<button type="button" onclick="submit()" class="btn bg-info rounded-2 py-2">Submit</button>
					</div>
				</div>
				<div class="card-footer text-center" style="background:none">
					<h6>&copy;@DateTime.Now.Year All Rights Reserved. EverSafe Academy</h6>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
<script src="@Url.Content("//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js")"></script>
<script src="@Url.Content("https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js")"></script>
<script src="@Url.Content("//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js")"></script>
<script src="@Url.Content("~/Scripts/sstm_js_enc/_sstm_enc.js")"></script>
<script src="~/Theme/plugins/toastr/toastr.min.js"></script>
<script>
    $(document).ready(function () {
        $('[data-toggle="tooltip"]').tooltip();
    });
    var spnratingval = "";

    window.addEventListener("popstate", function (event) {
        if (typeof event.state == "object"
            && event.state.obsolete !== true) {
            history.replaceState({ "obsolete": true }, "");
            history.pushState(event.state, "");
        }
        if (typeof event.state == "object"
            && event.state.obsolete === true) {
            history.back()
        }
    }, false);
    $(document).ready(function () {
        $('.thumbs').on('click', function () {
            var _onStar = parseInt($(this).find('span > i').data('value'), 10);
            var _message = "";
            if (_onStar == 3) {
                _message = "Thanks!&nbsp; Your rated as excellent feedback.";
                $('.text-feeback-message').val('').prop('hidden', true);
                spnratingval = 3;
            }
            else if (_onStar == 2) {
                $('.text-feeback-message').val('').prop('hidden', true);
                _message = "Thanks!&nbsp; Your rated as good feedback.";
                spnratingval = 2;
            }
            else {
                $('#text-feeback-message').val('').removeAttr('hidden');
                _message = "We will improve ourselves. Your rated as poor. Kindly if any suggestion.";
                $('.text-feeback-message').removeAttr('hidden');
                spnratingval = 1;
            }
            $('#rating_description').removeAttr('hidden');
            $('.success-box').fadeIn(200);
            $('.success-box .text-message').html("<span>" + _message + "</span>");
        });
    });

    function submit() {
        var token = $('input[name="__RequestVerificationToken"]').val()
        var txtStudentName = $('#txtStudentName').val();
        var txtBatchId = $('#txtBatchId').val();
        var txtCourseId = $('#txtCourseId').val();
        var txtxSuggestion = $('#txtxSuggestion').val();
        if (txtStudentName.trim() == "" || txtBatchId.trim() == "" || txtCourseId.trim() == "" || spnratingval == "") {
            toastr.error('Please fill the mandatory Fields.');
            return false;
        }
        if (spnratingval == "1" && $('#txtxSuggestion').val().trim() == "") {
            toastr.error('Please give suggestion.');
            return false;
        }
        var data = {};
        data.StudentName = txtStudentName;
        data.StudentId = "@TempData["studentId"]";
        data.BatchId = txtBatchId;
        data.CourseId = txtCourseId;
        data.Rating = spnratingval;
        data.Rating_Description = txtxSuggestion;
        var encryData = $.sstm_encrypt(JSON.stringify(data))
        $.ajax({
            url: "@Url.Action("CreateFeedBackPage", "Intro",null)",
            method: "POST",
            dataType: "json",
            beforeSend: ((k) => { $(".loadingDiv").show(); }),
            data: { query: encryData, __RequestVerificationToken: token },
            success: ((data) => {
                if (data.status == true) {
                    setTimeout(() => { $(".loadingDiv").hide() }, 2000);
                    toastr.success('Feedback Send Successfully.!!!');
                    location.reload();
                } else {
                    toastr.warning(data.response);
                }
            }),
            error: ((err) => {
                debugger;
                toastr.error('Something went wrong! Please refresh the page and try again.');
                console.warn(err);
            })
        });
    }
</script> 