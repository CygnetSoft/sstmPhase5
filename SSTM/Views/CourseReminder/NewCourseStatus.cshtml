@model  SSTM.Models.CourseTrackers.NewCourseTrackingModel
@{
    ViewBag.Title = "New Course Tracker";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var currentSession = (SSTM.Helpers.App.AppSession)Session["AppSession"];

}
<link href="~/Theme/dist/MultiSteps/style.css" rel="stylesheet" />
<style>
    .step-circle::before {
        left: -8px !important;
        width: calc(5.2rem + 2rem - 0.5rem) !important;
    }

    .step-circle {
        width: 3.5rem !important;
        height: 3.5rem !important;
        border: 10px solid !important;
    }

    .step-text {
        font-size: 12px !important;
        margin-left: 12px;
    }

    .step-content {
        box-sizing: content-box;
        display: flex;
        align-items: center;
        flex-direction: column;
        width: 4rem;
        min-width: 10rem !important;
        max-width: 19rem !important;
        padding-top: 0.5rem !important;
        padding-right: 0rem !important;
    }

    .btn3d {
        transition: all .08s linear;
        position: relative;
        outline: medium none;
        -moz-outline-style: none;
        border: 0px;
        color: black !important;
        font-weight: bold;
    }

        .btn3d:focus {
            outline: medium none;
            -moz-outline-style: none;
        }

    .steps {
        margin: 0 !important;
        list-style: none;
        display: flex;
    }

    .hoverbuttoneffect {
        text-align: center;
        -moz-transition: all 1.1s !important;
        box-shadow: 0px 2px 0px 3px #e76825 !important;
        margin: 5px;
    }
</style>
<section class="content" style="padding-top:10px;">
    @*step-success ,step-active, step-error *@
    <div class="card">
        <div class="card-header">
            <h3 class="card-title" id="header">@ViewBag.courseName Tracker</h3>
            <h5 style="float: right;color:red">@ViewBag.oldDocnotrack</h5>
        </div>
        <div class="col-12">
            <a onclick="backNewCourseButtonClick('@ViewBag.MasterCourse',@ViewBag.MasterCourseId,'@ViewBag.courseName')" id="backcourse" class="btn btn-default btn-sm float-right backButtonClick">
                <i class="fa fa-backward"></i>&nbsp;Back
            </a>
        </div>
        <div class="card-body steps">
           
            <div class="col-12">
                @*border: 5px solid lightblue;*@
                <div class="mb-3" style="margin-left: 0%;margin-top: 24px;width: 100%;">
                    <ul class="steps">
                        <li class="@( @Model.NewCourseSubmitUser!=null && @Model.NewCourseSubmitUser!=" "? "step  step-success" : "step")" id="newcourse">
                            <div class="step-content">
                                <span class="step-circle" data-toggle="tooltip" data-placement="top" title="By Developer: @Model.NewCourseSubmitUser  on :@Model.NewCourseSubmitDate ">1</span>
                                <button id="submitedUser" class="step-text btn-sm btn-warning hoverbuttoneffect" style="color: black !important;width: 100%;height: 3rem;border-radius: 0px !important;border-right: 2px solid black !important;border-left: 1px solid black !important;">
                                    New course Request(AEB Member)
                                </button>
                            </div>
                        </li>
                        <li class="@( @Model.NeedanalysisUser!=null && @Model.NeedanalysisUser != " " && Model.NeedanalysisDate!=null? @Model.NeedanalysisDate.Value>= DateTime.Now.Date.AddDays(7)? @Model.NeedanalysisUser!= " "?"step  step-success": "step  step-danger": "step  step-success" : @Model.NeedanalysisDate==null?"step ":@Model.NeedanalysisDate.Value >= DateTime.Now.Date.AddDays(7) && @Model.NeedanalysisUser == " " ? "step  step-danger" : "step ")" id="needanalysis">
                            <div class="step-content">
                                <span class="step-circle" data-toggle="tooltip" data-placement="top" title="By Developer: @Model.NeedanalysisUser  on :@Model.NeedanalysisDate ">2</span>
                                <button id="submitedUser" class="step-text btn-sm btn-warning hoverbuttoneffect" style="color: black !important;width: 100%;height: 3rem;border-radius: 0px !important;border-right: 2px solid black !important;border-left: 1px solid black !important;">
                                    Need analysis (Developer)
                                </button>
                            </div>
                        </li>
                        <li class="@(@Model.CourseProposalUser!=null && @Model.CourseProposalUser != " " && Model.NeedanalysisDate!=null? @Model.CourseProposalDate.Value>= DateTime.Now.Date.AddDays(7)? @Model.CourseProposalUser!= " "?"step  step-success": "step  step-danger": "step  step-success" : @Model.CourseProposalDate==null?"step ":@Model.CourseProposalDate.Value >= DateTime.Now.Date.AddDays(7) && @Model.CourseProposalUser == " " ? "step  step-danger" : "step ")" id="courseproposal">

                            <div class="step-content">
                                <span class="step-circle" data-toggle="tooltip" data-placement="top" title="By Developer: @Model.CourseProposalUser  on :@Model.CourseProposalDate ">3</span>
                                <button id="submitedUser" class="step-text btn-sm btn-warning hoverbuttoneffect" style="color: black !important;width: 100%;height: 3rem;border-radius: 0px !important;border-right: 2px solid black !important;border-left: 1px solid black !important;">
                                    Course Proposal (Developer)
                                </button>
                            </div>
                        </li>
                        <li class="@(@Model.AEBMeetingUser!=null && @Model.AEBMeetingUser != " " && Model.AEBMeetingDate!=null? @Model.AEBMeetingDate.Value>= DateTime.Now.Date.AddDays(7)? @Model.AEBMeetingUser!= " "?"step  step-success": "step  step-danger": "step  step-success" : @Model.AEBMeetingDate==null?"step ":@Model.AEBMeetingDate.Value >= DateTime.Now.Date.AddDays(7) && @Model.AEBMeetingUser == " " ? "step  step-danger" : "step ")" id="aebmeeting">
                            <div class="step-content">
                                <span class="step-circle" data-toggle="tooltip" data-placement="top" title="By Developer: @Model.AEBMeetingUser  on :@Model.AEBMeetingDate ">4</span>
                                <button id="submitedUser" class="step-text btn-sm btn-warning hoverbuttoneffect" style="color: black !important;width: 100%;height: 3rem;border-radius: 0px !important;border-right: 2px solid black !important;border-left: 1px solid black !important;">
                                    AEB Meeting (Director/AEB member)
                                </button>
                            </div>
                        </li>
                        <li class="@(@Model.LetterofundertakingUser!=null && @Model.LetterofundertakingUser != " " && Model.LetterofundertakingDate!=null? @Model.LetterofundertakingDate.Value>= DateTime.Now.Date.AddDays(7)? @Model.LetterofundertakingUser!= " "?"step  step-success": "step  step-danger": "step  step-success" : @Model.LetterofundertakingDate==null?"step ":@Model.LetterofundertakingDate.Value >= DateTime.Now.Date.AddDays(7) && @Model.LetterofundertakingUser == " " ? "step  step-danger" : "step ")" id="latterundertaiking">
                            <div class="step-content">
                                <span class="step-circle" data-toggle="tooltip" data-placement="top" title="By Developer: @Model.LetterofundertakingUser  on :@Model.LetterofundertakingDate ">5</span>
                                <button id="submitedUser" class="step-text btn-sm btn-warning hoverbuttoneffect" style="color: black !important;width: 100%;height: 3rem;border-radius: 0px !important;border-right: 2px solid black !important;border-left: 1px solid black !important;">
                                    Letter of undertaking (Director/AEB member)
                                </button>
                            </div>
                        </li>
                        <li class="@(@Model.submitedUser!=null && @Model.submitedUser!=" "? "step  step-success" : "step")" id="Submitted">
                            <div class="step-content">
                                <span class="step-circle" data-toggle="tooltip" data-placement="top" title="By Developer: @Model.submitedUser  on :@Model.submitedDate ">6</span>
                                <button id="submitedUser" class="step-text btn-sm btn-warning hoverbuttoneffect" style="color: black !important;width: 100%;height: 3rem;border-radius: 0px !important;border-right: 2px solid black !important;border-left: 1px solid black !important;">
                                    Submitted (By Developer)
                                </button>
                            </div>
                        </li>
                        @*onclick="CourseStatusMail('')"*@
                        <li class="@( @Model.SMEAssignUser!=null && @Model.SMEAssignUser != " " && Model.submitedDate!=null? @Model.submitedDate.Value>= DateTime.Now.Date.AddDays(7)? @Model.SMEAssignUser!= " "?"step  step-success": "step  step-danger": "step  step-success" : @Model.submitedDate==null?"step ":@Model.submitedDate.Value >= DateTime.Now.Date.AddDays(7) && @Model.SMEAssignUser == " " ? "step  step-danger" : "step ")" id="SMEAssigned">
                            <div class="step-content">
                                <span class="step-circle" data-toggle="tooltip" data-placement="top" title="SME Assigned.: @Model.SMEAssignUser  on :@Model.AssignDate ">7</span>
                                <button id="SMEAssignUser" class="step-text btn-sm btn-warning hoverbuttoneffect" style="color: black !important;width: 100%;height: 3rem;border-radius: 0px !important;border-right: 2px solid black !important;border-left: 1px solid black !important;">SME Assigned</button>
                            </div>
                        </li>
                        @*onclick="CourseStatusMail('SMEReview')"*@
                        <li class="@(@Model.SMEReviewUser!=null && @Model.SMEReviewUser != " " && Model.AssignDate!=null ?   @Model.AssignDate.Value>= DateTime.Now.Date.AddDays(7)? @Model.SMEReviewUser != " "?"step  step-success": "step  step-danger": "step  step-success"  : @Model.AssignDate==null?"step " :@Model.AssignDate.Value >= DateTime.Now.Date.AddDays(7) && @Model.SMEReviewUser == " " ? "step  step-danger" : "step ")" id="SMEReviewed">
                            <div class="step-content">
                                <span class="step-circle" data-toggle="tooltip" data-placement="top" title="SME Review By: @Model.SMEReviewUser on :@Model.SMEReviewDate ">8</span>
                                <button id="SMEReviewUser" class="step-text btn-sm btn-warning hoverbuttoneffect" style="color: black !important;width: 100%;height: 3rem;border-radius: 0px !important;border-right: 2px solid black !important;border-left: 1px solid black !important;">SME Reviewed</button>

                            </div>
                        </li>
                        @*onclick="CourseStatusMail('Improvement')"*@
                        <li class="@(@Model.ImproveUser!=null && @Model.ImproveUser != " " && @Model.SMEReviewDate!=null   ? @Model.SMEReviewDate.Value>= DateTime.Now.Date.AddDays(7)? @Model.ImproveUser != " "?"step  step-success": "step  step-danger": "step  step-success"  : @Model.SMEReviewDate==null ? "step ":@Model.SMEReviewDate.Value >= DateTime.Now.Date.AddDays(7) && @Model.ImproveUser == " " ? "step  step-danger" : "step ")">
                            <div class="step-content" id="Improvement">
                                <span class="step-circle" data-toggle="tooltip" data-placement="top" title="Improvement assig By: @Model.ImproveUser  on :@Model.ImproveDate">9</span>
                                <button id="ImproveUser" class="step-text btn-sm btn-warning hoverbuttoneffect" style="color: black !important;width: 100%;height: 3rem;border-radius: 0px !important;border-right: 2px solid black !important;border-left: 1px solid black !important;">Under Improvement (By Developer)</button>

                            </div>
                        </li>
                        @*onclick="CourseStatusMail('SMEAccept')"*@
                        <li class="@(@Model.SMEAcceptUser!=null && @Model.SMEAcceptUser != " " &&  @Model.ImproveDate!=null? @Model.ImproveDate.Value>= DateTime.Now.Date.AddDays(7)? @Model.SMEAcceptUser != " "?"step  step-success": "step  step-danger": "step  step-success"  :@Model.ImproveDate==null?"step ": @Model.ImproveDate.Value >= DateTime.Now.Date.AddDays(7) && @Model.SMEAcceptUser == " " ? "step  step-danger" : "step ")">
                            <div class="step-content" id="SMEAccepted">
                                <span class="step-circle" data-toggle="tooltip" data-placement="top" title="Accept By: @Model.SMEAcceptUser  on :@Model.SMEAcceptDate">10</span>
                                <button id="SMEAccept" class="step-text btn-sm btn-warning hoverbuttoneffect" style="color: black !important;width: 100%;height: 3rem;border-radius: 0px !important;border-right: 2px solid black !important;border-left: 1px solid black !important;">SME Accepted</button>
                            </div>
                        </li>
                        @*onclick="CourseStatusMail('Release')"*@
                        <li class="@(@Model.ReleseUser!=null && @Model.ReleseUser != " " && @Model.ReleaseDate!=null ? @Model.ReleaseDate.Value>= DateTime.Now.Date.AddDays(7)? @Model.ReleseUser != " "?"step  step-success": "step  step-danger": "step  step-success"  :@Model.ReleaseDate==null?"step ": @Model.ReleaseDate.Value >= DateTime.Now.Date.AddDays(7) && @Model.ReleseUser == " " ? "step  step-danger" : "step ")">
                            <div class="step-content" id="Released">
                                <span class="step-circle" data-toggle="tooltip" data-placement="top" title="Accept By: @Model.ReleseUser Release on :@Model.ReleaseDate">11</span>
                                <button id="ReleaseCourse" class="step-text btn-sm btn-warning hoverbuttoneffect" style="color: black !important;width: 100%;height: 3rem;border-radius: 0px !important;border-right: 2px solid black !important;border-left: 1px solid black !important;">Released</button>

                            </div>
                        </li>
                        @*onclick="CourseStatusMail('Release')"*@
                        <li class="@(@Model.RenewReminderUser!=null && @Model.RenewReminderUser != " " && @Model.RenewReminderDate!=null ? @Model.RenewReminderDate.Value>= DateTime.Now.Date.AddDays(7)? @Model.RenewReminderUser != " "?"step  step-success": "step  step-danger": "step  step-success"  :@Model.RenewReminderDate==null?"step ": @Model.RenewReminderDate.Value >= DateTime.Now.Date.AddDays(7) && @Model.RenewReminderUser == " " ? "step  step-danger" : "step ")">
                            <div class="step-content" id="Released">
                                <span class="step-circle" data-toggle="tooltip" data-placement="top" title="Accept By: @Model.RenewReminderUser Release on :@Model.ReleaseDate">12</span>
                                <button id="ReleaseCourse" class="step-text btn-sm btn-warning hoverbuttoneffect" style="color: black !important;width: 100%;height: 3rem;border-radius: 0px !important;border-right: 2px solid black !important;border-left: 1px solid black !important;">Renew</button>

                            </div>
                        </li>

                    </ul>
                </div>
            </div>
        </div>
        <label>Note : </label><small style="color:red">Any Stage course not process 7 serven day circle show red color</small>
        <label>Old Course Note : </label><small style="color:red">Old Course Track not found</small>
    </div>
</section>
<input type="hidden" value="@ViewBag.MasterCourse" id="MasterCourse" />
<input type="hidden" value="@ViewBag.MasterCourseId" id="MasterCourseId" />
<input type="hidden" value="@ViewBag.courseName" id="Coursename" />
<script src="~/Scripts/course/CourseStatus.js"></script>
@section scripts{
    <script>
        var GotonewCourseUrl = '@Url.Action("Index", "CourseReminder")';
        var Courseid=@Model.Courseid;
        var userRole = '@currentSession.UserRole';

        //function backButtonClick() {
        //    //alert("sdf");
        //    //if (MasterCourse == true)
        //    //    localStorage.setItem("SubfolderCount", 0);
        //    window.history.back();
        //    //localStorage.setItem("SubfolderCount", localStorage.getItem("SubfolderCount") - 1);
        //}

    var SMESAssginMailCourseUrl = '@Url.Action("CourseMail", "Course")';
    $(document).ready(function () {
        var userRole = "@currentSession.UserRole.ToString()";

        // $("#Pending").attr('title', 'test');
        if (userRole == "Administration" || userRole == "Director") {
            $("#newcourse,#needanalysis,#courseproposal,#aebmeeting#latterundertaiking,#submitedUser,#SMEAssignUser,#SMEReviewUser,#ImproveUser,#SMEAccept,#ReleaseCourse").removeAttr('disabled', 'disabled')
            $(".step-success").attr('disabled', 'disabled');
        }
        else {
            $("#newcourse,#needanalysis,#courseproposal,#aebmeeting#latterundertaiking,#submitedUser,#SMEAssignUser,#SMEReviewUser,#ImproveUser,#SMEAccept,#ReleaseCourse").attr('disabled', 'disabled')
        }
    });
    $(function () {
        $('[data-toggle="tooltip"]').tooltip();
    });


    </script>
}